var DATA={},id_info=document.getElementById("id_info");function showInfo(e){document.getElementById("id_info_wrapper").style.display="block",document.getElementById("id_info").innerHTML=e}function hideInfo(){document.getElementById("id_info_wrapper").style.display="none",document.getElementById("id_info").innerHTML=""}function showLoader(e){document.getElementById("id_loader_wrapper").style.display="block",document.getElementById("id_loader").style.display="block"}function hideLoader(){document.getElementById("id_loader_wrapper").style.display="none",document.getElementById("id_loader").style.display="bnone"}function rest_call(e,t="GET",o={},n=!0,i=!1){i&&showLoader(),"POST"==t&&(o=JSON.stringify(o));var d=[];for(var s in o)d.push(s+"="+o[s]);d=d.join("&");var c=new XMLHttpRequest;if(c.onreadystatechange=function(){if(4==this.readyState&&(hideLoader(),200==this.status)){var t=this.responseText;if("/check_for_update"==e){var o=JSON.parse(t);if(1==o.resp_code)confirm("New Update Available. Download Now?")&&(document.getElementById("id_download_update").style.display="block");else o.resp_code,alert(o.text)}else n?location.reload():(console.log(t),alert(t))}},"GET"==t){d=""!=d?"?"+d:"";c.open(t,e+d,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),c.send()}else"POST"==t&&(c.open(t,e,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),c.send(o))}function changeSpeed(e,t){console.log("ccd"),console.log(e);var o=e.getAttribute("data-prop");p1=JSON.parse(o);var n=parseInt(p1.value);"1"==t?n+=1:n-=1,n>=4?n=4:n<0&&(n=0),p1.value=n,console.log(p1),rest_call(url="/change_property",method="GET",data=p1,refresh_on_success=!1,show_loader=!0)}function changeProperty(e){console.log("ccd"),console.log(e);var t=e.getAttribute("data-prop");console.log(t),console.log(t.value),p1=JSON.parse(t),console.log(p1),console.log(p1.value);var o=parseInt(p1.value);"0"==p1.type_property?o=1-o:"1"==p1.type_property&&(4==o?o=0:o+=1),p1.value=o,console.log(p1),rest_call(url="/change_property",method="GET",data=p1,refresh_on_success=!1,show_loader=!0)}var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){if(4==this.readyState)if(document.getElementById("id_loader").style.display="none",200==this.status){var e=this.responseText;try{console.log("res"),console.log(e);var t=JSON.parse(e),o=t.connected_ssid,n=t.connected_ssid_strength;if(o==t.wifi_config_1.ssid){var d=document.getElementById("id_conn1");d.style.color="green",d.innerHTML=d.innerHTML+" ("+n+"%) "}if(document.getElementById("id_version").innerHTML=t.version,document.getElementById("id_device").innerHTML=t.id_device,document.getElementById("id_ap_ssid").value=t.ap_config.ssid,document.getElementById("id_ap_password").value=t.ap_config.password,document.getElementById("id_wifi_ssid_1").value=t.wifi_config_1.ssid,document.getElementById("id_wifi_password_1").value=t.wifi_config_1.password,document.getElementById("id_text_name_device").value=t.name_device,document.getElementById("id_text_pin_device").value=t.pin_device,t.hasOwnProperty("input_type")){var s=t.input_type;"switch"==s?document.getElementById("id_ip_sel_switch").checked=!0:"pushbutton"==s?document.getElementById("id_ip_sel_pushbtn").checked=!0:document.getElementById("id_ip_sel_switch").checked=!0}else document.getElementById("id_ip_sel_switch").checked=!0;var c=t.blocked_topic;if(c.length>0){var l="";for(i=0;i<c.length;i++)id_topic=c[i],""!=id_topic&&"#"!=id_topic&&null!=id_topic&&(l+="<input type='checkbox' name='sel_blocked_topic' value='"+id_topic+"'>"+id_topic+"<br>");document.getElementById("id_blocked_topic_container").innerHTML+=l}else document.getElementById("id_blocked_topic_container").innerHTML="No Topics",document.getElementById("id_remove_blocked_topic").style.display="none";var p=t.sub_topic;if(p.length>0){l="";for(document.getElementsByClassName("C_topic_wrapper")[0].style.display="block",i=0;i<p.length;i++)id_topic=p[i][0],""!=id_topic&&id_topic!=t.id_device&&"#"!=id_topic&&null!=id_topic&&(l+="<input type='checkbox' name='sel_topic' value='"+id_topic+"'>"+p[i][1]+"/"+p[i][2]+"<br>");document.getElementById("id_topics").innerHTML+=l}else document.getElementById("id_topics").innerHTML="No homes",document.getElementById("id_remove_topic").style.display="none"}catch(e){console.log(e)}}else console.log(this.status),console.log(this.statusText)},xhttp.open("GET","/load_config",!0),xhttp.setRequestHeader("Content-type","application/json; charset=utf-8"),xhttp.send();var xhttp2=new XMLHttpRequest;xhttp2.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e=this.responseText;try{console.log("res"),console.log(e);var t=JSON.parse(e);for(prop_data="",document.getElementById("id_props").innerHTML="",j=0;j<t.length;j++)"0"==t[j].type_property?prop_data+="<div> "+t[j].name_property+" : "+t[j].value+"<button onclick='changeProperty(this)' data-prop='"+JSON.stringify(t[j])+"'> change </button> </div> <br> <br>":"1"==t[j].type_property&&(prop_data+="<div> "+t[j].name_property+" : <button onclick='changeSpeed(this, 1)' data-prop='"+JSON.stringify(t[j])+"'> + </button>"+t[j].value+"   <button onclick='changeSpeed(this, 0)' data-prop='"+JSON.stringify(t[j])+"'> - </button> </div> <br> <br>");document.getElementById("id_props").innerHTML+=prop_data}catch(e){console.log(e)}}else console.log(this.status),console.log(this.statusText)},setInterval(function(){xhttp2.open("GET","/load_properties",!0),xhttp2.setRequestHeader("Content-type","application/json; charset=utf-8"),xhttp2.send()},5e3);